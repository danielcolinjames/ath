{"version":3,"sources":["webpack://Vibrant/webpack/universalModuleDefinition","webpack://Vibrant/webpack/bootstrap","webpack://Vibrant/../vibrant-core/src/utils.ts","webpack://Vibrant/../vibrant-core/src/index.ts","webpack://Vibrant/../vibrant-image/src/index.ts","webpack://Vibrant/../vibrant-color/src/index.ts","webpack://Vibrant/../vibrant-color/src/converter.ts","webpack://Vibrant/./src/browser.ts","webpack://Vibrant/./src/config.ts","webpack://Vibrant/../vibrant-core/src/options.ts","webpack://Vibrant/../vibrant-core/src/builder.ts","webpack://Vibrant/../vibrant-image-browser/src/index.ts","webpack://Vibrant/./src/bundle-worker.ts","webpack://Vibrant/../vibrant-core/src/pipeline/worker/client.ts","webpack://Vibrant/../vibrant-worker/src/index.ts","webpack://Vibrant/../vibrant-worker/src/pool.ts","webpack://Vibrant/../vibrant-types/src/index.ts","webpack://Vibrant/./src/pipeline/index.worker.ts","webpack://Vibrant/./node_modules/worker-loader/dist/workers/InlineWorker.js"],"names":[],"mappings":"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","file":"vibrant.worker.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"Vibrant\"] = factory();\n\telse\n\t\troot[\"Vibrant\"] = factory();\n})(window, function() {\nreturn "," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 18);\n","export function mapValues<T, R> (o: { [key: string]: T }, mapper: (v: T) => R): { [key: string]: R } {\n  let result: { [key: string]: R } = {}\n\n  for (const key in o) {\n    if (o.hasOwnProperty(key)) {\n      const v = o[key]\n      result[key] = mapper(v)\n    }\n  }\n\n  return result\n}\n\n/**\n * Overwrite values or properties on objects and lists recursively.\n * A shallow copy will be created for each array value.\n */\nexport function assignDeep<T> (target: Partial<T>, ...sources: (Partial<T> | undefined)[]): T {\n  sources.forEach(s => {\n    if (!s) return\n    for (const key in s) {\n      if (s.hasOwnProperty(key)) {\n        const v = s[key] as any\n        if (Array.isArray(v)) {\n          // Shallow copy\n          target[key] = v.slice(0) as any\n        } else if (typeof v === 'object') {\n          if (!target[key]) target[key] = {} as any\n          assignDeep<any>(target[key] as any, v)\n        } else {\n          target[key] = v\n        }\n      }\n    }\n  })\n  return target as T\n}\n","import { Options, buildProcessOptions } from './options'\nimport { Callback } from '@vibrant/types'\nimport { Image, ImageSource } from '@vibrant/image'\n\nimport { Filter, Palette, Swatch } from '@vibrant/color'\n\nimport Builder from './builder'\nimport { Pipeline, ProcessOptions, ProcessResult } from './pipeline'\nimport { assignDeep } from './utils'\n\nexport interface VibrantStatic {\n  from (src: ImageSource): Builder\n}\n\nexport default class Vibrant {\n  private _result: ProcessResult\n  private static _pipeline: Pipeline\n  static use (pipeline: Pipeline) {\n    this._pipeline = pipeline\n  }\n  static DefaultOpts: Partial<Options> = {\n    colorCount: 64,\n    quality: 5,\n    filters: []\n  }\n\n  static from (src: ImageSource): Builder {\n    return new Builder(src)\n  }\n\n  get result () {\n    return this._result\n  }\n\n  opts: Options\n  constructor (private _src: ImageSource, opts?: Partial<Options>) {\n    this.opts = assignDeep({}, Vibrant.DefaultOpts, opts)\n  }\n  private _process (\n    image: Image,\n    opts?: Partial<ProcessOptions>\n  ): Promise<ProcessResult> {\n    let { quantizer } = this.opts\n\n    image.scaleDown(this.opts)\n\n    let processOpts = buildProcessOptions(this.opts, opts)\n\n    return Vibrant._pipeline.process(image.getImageData(), processOpts)\n  }\n  palette (): Palette {\n    return this.swatches()\n  }\n  swatches (): Palette {\n    throw new Error(\n      'Method deprecated. Use `Vibrant.result.palettes[name]` instead'\n    )\n  }\n\n  getPalette (name: string, cb?: Callback<Palette>): Promise<Palette>\n  getPalette (cb?: Callback<Palette>): Promise<Palette>\n  getPalette (): Promise<Palette> {\n    const arg0 = arguments[0]\n    const arg1 = arguments[1]\n    const name = typeof arg0 === 'string' ? arg0 : 'default'\n    const cb = typeof arg0 === 'string' ? arg1 : arg0\n    let image = new this.opts.ImageClass()\n    return image\n      .load(this._src)\n      .then(image => this._process(image, { generators: [name] }))\n      .then(result => {\n        this._result = result\n        return result.palettes[name]\n      })\n      .then(res => {\n        image.remove()\n        if (cb) {\n          cb(undefined, res)\n        }\n        return res\n      })\n      .catch(err => {\n        image.remove()\n        if (cb) {\n          cb(err)\n        }\n        return Promise.reject(err)\n      })\n  }\n  getPalettes (\n    names: string[],\n    cb?: Callback<Palette>\n  ): Promise<{ [name: string]: Palette }>\n  getPalettes (cb?: Callback<Palette>): Promise<{ [name: string]: Palette }>\n  getPalettes (): Promise<{ [name: string]: Palette }> {\n    const arg0 = arguments[0]\n    const arg1 = arguments[1]\n    const names = Array.isArray(arg0) ? arg0 : ['*']\n    const cb = Array.isArray(arg0) ? arg1 : arg0\n    let image = new this.opts.ImageClass()\n    return image\n      .load(this._src)\n      .then(image =>\n        this._process(image, {\n          generators: names\n        })\n      )\n      .then(result => {\n        this._result = result\n        return result.palettes\n      })\n      .then(res => {\n        image.remove()\n        if (cb) {\n          cb(undefined, res)\n        }\n        return res\n      })\n      .catch(err => {\n        image.remove()\n        if (cb) {\n          cb(err)\n        }\n        return Promise.reject(err)\n      })\n  }\n}\n","import { Callback } from '@vibrant/types'\nimport { Filter } from '@vibrant/color'\n\nexport type ImageCallback = Callback<Image>\n\nexport type ImageSource = string | HTMLImageElement | Buffer\n\nexport type Pixels = Uint8ClampedArray | Buffer\nexport interface ImageData {\n  data: Pixels,\n  width: number,\n  height: number\n}\n\nexport interface ImageOptions {\n  quality: number\n  maxDimension: number\n}\n\nexport interface Image {\n  load (image: ImageSource): Promise<Image>\n  clear (): void\n  update (imageData: ImageData): void\n  getWidth (): number\n  getHeight (): number\n  resize (targetWidth: number, targetHeight: number, ratio: number): void\n  getPixelCount (): number\n  getImageData (): ImageData\n  remove (): void\n  scaleDown (opts: ImageOptions): void\n}\n\nexport interface ImageClass {\n  new(): Image\n}\n\nexport abstract class ImageBase implements Image {\n  abstract load (image: ImageSource): Promise<ImageBase>\n  abstract clear (): void\n  abstract update (imageData: ImageData): void\n  abstract getWidth (): number\n  abstract getHeight (): number\n  abstract resize (targetWidth: number, targetHeight: number, ratio: number): void\n  abstract getPixelCount (): number\n  abstract getImageData (): ImageData\n  abstract remove (): void\n\n  scaleDown (opts: ImageOptions): void {\n    let width: number = this.getWidth()\n    let height: number = this.getHeight()\n\n    let ratio: number = 1\n\n    if (opts.maxDimension > 0) {\n      let maxSide: number = Math.max(width, height)\n      if (maxSide > opts.maxDimension) ratio = opts.maxDimension / maxSide\n    } else {\n      ratio = 1 / opts.quality\n    }\n\n    if (ratio < 1) this.resize(width * ratio, height * ratio, ratio)\n  }\n}\n\nexport function applyFilters (imageData: ImageData, filters: Filter[]) {\n  if (filters.length > 0) {\n    let pixels = imageData.data\n    let n = pixels.length / 4\n    let offset\n    let r\n    let g\n    let b\n    let a\n    for (let i = 0; i < n; i++) {\n      offset = i * 4\n      r = pixels[offset + 0]\n      g = pixels[offset + 1]\n      b = pixels[offset + 2]\n      a = pixels[offset + 3]\n      // Mark ignored color\n      for (let j = 0; j < filters.length; j++) {\n        if (!filters[j](r, g, b, a)) {\n          pixels[offset + 3] = 0\n          break\n        }\n      }\n    }\n  }\n\n  return imageData\n}\n","import { rgbToHsl, rgbToHex } from './converter'\n\nexport interface Filter {\n  (red: number, green: number, blue: number, alpha: number): boolean\n}\n\n/**\n * 3d floating pointer vector\n */\nexport type Vec3 = [number, number, number]\n\n/**\n * The layout for a node-vibrant Palette. Allows you to keep track of\n */\nexport interface Palette {\n  Vibrant: Swatch | null\n  Muted: Swatch | null\n  DarkVibrant: Swatch | null\n  DarkMuted: Swatch | null\n  LightVibrant: Swatch | null\n  LightMuted: Swatch | null\n  // ?\n  [name: string]: Swatch | null\n}\n\nexport class Swatch {\n  static applyFilters (colors: Swatch[], filters: Filter[]): Swatch[] {\n    return filters.length > 0\n      ? colors.filter(({ r, g, b }) => {\n        for (let j = 0; j < filters.length; j++) {\n          if (!filters[j](r, g, b, 255)) return false\n        }\n        return true\n      })\n      : colors\n  }\n\n  /**\n   * Make a value copy of a swatch based on a previous one. Returns a new Swatch instance\n   * @param {Swatch} swatch\n   */\n  static clone (swatch: Swatch) {\n    return new Swatch(swatch._rgb, swatch._population)\n  }\n  private _hsl: Vec3\n  private _rgb: Vec3\n  private _yiq: number\n  private _population: number\n  private _hex: string\n\n  /**\n   * The red value in the RGB value\n   */\n  get r (): number {\n    return this._rgb[0]\n  }\n  /**\n   * The green value in the RGB value\n   */\n  get g (): number {\n    return this._rgb[1]\n  }\n  /**\n   * The blue value in the RGB value\n   */\n  get b (): number {\n    return this._rgb[2]\n  }\n  /**\n   * The color value as a rgb value\n   */\n  get rgb (): Vec3 {\n    return this._rgb\n  }\n  /**\n   * The color value as a hsl value\n   */\n  get hsl (): Vec3 {\n    if (!this._hsl) {\n      let [r, g, b] = this._rgb\n      this._hsl = rgbToHsl(r, g, b)\n    }\n    return this._hsl\n  }\n\n  /**\n   * The color value as a hex string\n   */\n  get hex (): string {\n    if (!this._hex) {\n      let [r, g, b] = this._rgb\n      this._hex = rgbToHex(r, g, b)\n    }\n    return this._hex\n  }\n  get population (): number {\n    return this._population\n  }\n\n  /**\n   * Get the JSON object for the swatch\n   */\n  toJSON (): {rgb: Vec3, population: number} {\n    return {\n      rgb: this.rgb,\n      population: this.population\n    }\n  }\n\n  /**\n   * Get the color value as a rgb value\n   * @deprecated Use property instead\n   */\n  // TODO: deprecate internally, use property instead\n  getRgb (): Vec3 {\n    return this._rgb\n  }\n  /**\n   * Get the color value as a hsl value\n   * @deprecated Use property instead\n   */\n  // TODO: deprecate internally, use property instead\n  getHsl (): Vec3 {\n    return this.hsl\n  }\n  /**\n   * @deprecated Use property instead\n   */\n  // TODO: deprecate internally, use property instead\n  getPopulation (): number {\n    return this._population\n  }\n  /**\n   * Get the color value as a hex string\n   * @deprecated Use property instead\n   */\n  // TODO: deprecate internally, use property instead\n  getHex (): string {\n    return this.hex\n  }\n\n  private getYiq (): number {\n    if (!this._yiq) {\n      let rgb = this._rgb\n      this._yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000\n    }\n    return this._yiq\n  }\n\n  private _titleTextColor: string\n  private _bodyTextColor: string\n\n  get titleTextColor () {\n    if (this._titleTextColor) {\n      this._titleTextColor = this.getYiq() < 200 ? '#fff' : '#000'\n    }\n    return this._titleTextColor\n  }\n  get bodyTextColor () {\n    if (this._bodyTextColor) {\n      this._bodyTextColor = this.getYiq() < 150 ? '#fff' : '#000'\n    }\n    return this._bodyTextColor\n  }\n  getTitleTextColor (): string {\n    return this.titleTextColor\n  }\n\n  getBodyTextColor (): string {\n    return this.bodyTextColor\n  }\n\n  constructor (rgb: Vec3, population: number) {\n    this._rgb = rgb\n    this._population = population\n  }\n}\n","import { Vec3 } from './'\n\nexport const DELTAE94_DIFF_STATUS = {\n  NA: 0,\n  PERFECT: 1,\n  CLOSE: 2,\n  GOOD: 10,\n  SIMILAR: 50\n}\n\n/**\n * Converts hex string to RGB\n * @param hex - The hex value you with to get the RGB value of\n * @returns an array in the order of `red, green, blue` numerical values\n */\nexport function hexToRgb (hex: string): Vec3 {\n  let m = /^#?([a-f\\d]{2})([a-f\\d]{2})([a-f\\d]{2})$/i.exec(hex)\n\n  if (!m) throw new RangeError(`'${hex}' is not a valid hex color`)\n\n  return [m[1], m[2], m[3]].map((s) => parseInt(s, 16)) as Vec3\n}\n\n/**\n * Given values for an RGB color convert to and return a valid HEX string\n * @param r - Red value in RGB\n * @param g - Green value in RGB\n * @param b - Blue value in RGB\n * @returns a valid hex string with pre-pending pound sign\n */\nexport function rgbToHex (r: number, g: number, b: number): string {\n  return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7)\n}\n\n/**\n * Given values for an RGB color convert to and return a valid HSL value\n * @param r - Red value in RGB\n * @param g - Green value in RGB\n * @param b - Blue value in RGB\n * @returns an array in the order of `hue, saturation, light` numerical values\n */\nexport function rgbToHsl (r: number, g: number, b: number): Vec3 {\n  r /= 255\n  g /= 255\n  b /= 255\n  let max = Math.max(r, g, b)\n  let min = Math.min(r, g, b)\n  let h: number = 0\n  let s: number = 0\n  let l = (max + min) / 2\n  if (max !== min) {\n    let d = max - min\n    s = l > 0.5 ? d / (2 - max - min) : d / (max + min)\n    switch (max) {\n      case r:\n        h = (g - b) / d + (g < b ? 6 : 0)\n        break\n      case g:\n        h = (b - r) / d + 2\n        break\n      case b:\n        h = (r - g) / d + 4\n        break\n    }\n\n    h /= 6\n  }\n  return [h, s, l]\n}\n\nexport function hslToRgb (h: number, s: number, l: number): Vec3 {\n  let r: number\n  let g: number\n  let b: number\n\n  function hue2rgb (p: number, q: number, t: number): number {\n    if (t < 0) t += 1\n    if (t > 1) t -= 1\n    if (t < 1 / 6) return p + (q - p) * 6 * t\n    if (t < 1 / 2) return q\n    if (t < 2 / 3) return p + (q - p) * (2 / 3 - t) * 6\n    return p\n  }\n\n  if (s === 0) {\n    r = g = b = l\n  } else {\n    let q = l < 0.5 ? l * (1 + s) : l + s - (l * s)\n    let p = 2 * l - q\n    r = hue2rgb(p, q, h + 1 / 3)\n    g = hue2rgb(p, q, h)\n    b = hue2rgb(p, q, h - (1 / 3))\n  }\n  return [\n    r * 255,\n    g * 255,\n    b * 255\n  ]\n}\n\nexport function rgbToXyz (r: number, g: number, b: number): Vec3 {\n  r /= 255\n  g /= 255\n  b /= 255\n  r = r > 0.04045 ? Math.pow((r + 0.005) / 1.055, 2.4) : r / 12.92\n  g = g > 0.04045 ? Math.pow((g + 0.005) / 1.055, 2.4) : g / 12.92\n  b = b > 0.04045 ? Math.pow((b + 0.005) / 1.055, 2.4) : b / 12.92\n\n  r *= 100\n  g *= 100\n  b *= 100\n\n  let x = r * 0.4124 + g * 0.3576 + b * 0.1805\n  let y = r * 0.2126 + g * 0.7152 + b * 0.0722\n  let z = r * 0.0193 + g * 0.1192 + b * 0.9505\n\n  return [x, y, z]\n}\n\nexport function xyzToCIELab (x: number, y: number, z: number): Vec3 {\n  let REF_X = 95.047\n  let REF_Y = 100\n  let REF_Z = 108.883\n\n  x /= REF_X\n  y /= REF_Y\n  z /= REF_Z\n\n  x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116\n  y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116\n  z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116\n\n  let L = 116 * y - 16\n  let a = 500 * (x - y)\n  let b = 200 * (y - z)\n\n  return [L, a, b]\n}\n\nexport function rgbToCIELab (r: number, g: number, b: number): Vec3 {\n  let [x, y, z] = rgbToXyz(r, g, b)\n  return xyzToCIELab(x, y, z)\n}\n\nexport function deltaE94 (lab1: Vec3, lab2: Vec3): number {\n  let WEIGHT_L = 1\n  let WEIGHT_C = 1\n  let WEIGHT_H = 1\n\n  let [L1, a1, b1] = lab1\n  let [L2, a2, b2] = lab2\n  let dL = L1 - L2\n  let da = a1 - a2\n  let db = b1 - b2\n\n  let xC1 = Math.sqrt(a1 * a1 + b1 * b1)\n  let xC2 = Math.sqrt(a2 * a2 + b2 * b2)\n\n  let xDL = L2 - L1\n  let xDC = xC2 - xC1\n  let xDE = Math.sqrt(dL * dL + da * da + db * db)\n\n  let xDH = (Math.sqrt(xDE) > Math.sqrt(Math.abs(xDL)) + Math.sqrt(Math.abs(xDC)))\n    ? Math.sqrt(xDE * xDE - xDL * xDL - xDC * xDC)\n    : 0\n\n  let xSC = 1 + 0.045 * xC1\n  let xSH = 1 + 0.015 * xC1\n\n  xDL /= WEIGHT_L\n  xDC /= WEIGHT_C * xSC\n  xDH /= WEIGHT_H * xSH\n\n  return Math.sqrt(xDL * xDL + xDC * xDC + xDH * xDH)\n}\n\nexport function rgbDiff (rgb1: Vec3, rgb2: Vec3): number {\n  let lab1 = rgbToCIELab.apply(undefined, rgb1)\n  let lab2 = rgbToCIELab.apply(undefined, rgb2)\n  return deltaE94(lab1, lab2)\n}\n\nexport function hexDiff (hex1: string, hex2: string): number {\n  let rgb1 = hexToRgb(hex1)\n  let rgb2 = hexToRgb(hex2)\n\n  return rgbDiff(rgb1, rgb2)\n}\n\nexport function getColorDiffStatus (d: number): string {\n  if (d < DELTAE94_DIFF_STATUS.NA) {\n    return 'N/A'\n  }\n  // Not perceptible by human eyes\n  if (d <= DELTAE94_DIFF_STATUS.PERFECT) {\n    return 'Perfect'\n  }\n  // Perceptible through close observation\n  if (d <= DELTAE94_DIFF_STATUS.CLOSE) {\n    return 'Close'\n  }\n  // Perceptible at a glance\n  if (d <= DELTAE94_DIFF_STATUS.GOOD) {\n    return 'Good'\n  }\n  // Colors are more similar than opposite\n  if (d < DELTAE94_DIFF_STATUS.SIMILAR) {\n    return 'Similar'\n  }\n  return 'Wrong'\n\n}\n","import Vibrant from './config'\nimport BrowserImage from '@vibrant/image-browser'\n\nVibrant.DefaultOpts.ImageClass = BrowserImage\n\nexport = Vibrant\n","import Vibrant from '@vibrant/core'\n\nVibrant.DefaultOpts.quantizer = 'mmcq'\nVibrant.DefaultOpts.generators = ['default']\nVibrant.DefaultOpts.filters = ['default']\n\nexport default Vibrant\n","import { Palette, Swatch, Filter } from '@vibrant/color'\nimport { Image, ImageClass, ImageSource, ImageOptions } from '@vibrant/image'\nimport { Quantizer, QuantizerOptions } from '@vibrant/quantizer'\nimport { Generator } from '@vibrant/generator'\nimport { StageOptions, ProcessOptions } from './pipeline'\nimport { assignDeep } from './utils'\n\nexport interface Options extends ImageOptions, QuantizerOptions {\n  useWorker: boolean\n  ImageClass: ImageClass\n  quantizer: string | StageOptions\n  generators: (string | StageOptions)[]\n  filters: string[]\n}\n\nexport function buildProcessOptions (opts: Options, override?: Partial<ProcessOptions>): ProcessOptions {\n  let { colorCount, quantizer, generators, filters } = opts\n  // Merge with common quantizer options\n  let commonQuantizerOpts = { colorCount }\n  let q = typeof quantizer === 'string'\n    ? { name: quantizer, options: {} }\n    : quantizer\n  q.options = assignDeep({}, commonQuantizerOpts, q.options)\n\n  return assignDeep({}, {\n    quantizer: q,\n    generators,\n    filters\n  }, override)\n}\n","import {\n  Options\n} from './options'\nimport {\n  Callback\n} from '@vibrant/types'\nimport {\n  ImageClass,\n  ImageSource\n} from '@vibrant/image'\n\nimport {\n  Filter,\n  Palette\n} from '@vibrant/color'\nimport Vibrant from './'\nimport { assignDeep } from './utils'\n\nexport default class Builder {\n  private _src: ImageSource\n  private _opts: Partial<Options>\n  constructor (src: ImageSource, opts: Partial<Options> = {}) {\n    this._src = src\n    this._opts = assignDeep({}, Vibrant.DefaultOpts, opts)\n  }\n\n  maxColorCount (n: number): Builder {\n    this._opts.colorCount = n\n    return this\n  }\n\n  maxDimension (d: number): Builder {\n    this._opts.maxDimension = d\n    return this\n  }\n\n  addFilter (name: string): Builder {\n    if (!this._opts.filters) {\n      this._opts.filters = [name]\n    } else {\n      this._opts.filters.push(name)\n    }\n    return this\n  }\n\n  removeFilter (name: string): Builder {\n    if (this._opts.filters) {\n      let i = this._opts.filters.indexOf(name)\n      if (i > 0) this._opts.filters.splice(i)\n    }\n    return this\n  }\n\n  clearFilters (): Builder {\n    this._opts.filters = []\n    return this\n  }\n\n  quality (q: number): Builder {\n    this._opts.quality = q\n    return this\n  }\n\n  useImageClass (imageClass: ImageClass): Builder {\n    this._opts.ImageClass = imageClass\n    return this\n  }\n\n  useGenerator (generator: string, options?: any): Builder {\n    if (!this._opts.generators) this._opts.generators = []\n    this._opts.generators.push(options ? { name: generator, options } : generator)\n    return this\n  }\n\n  useQuantizer (quantizer: string, options?: any): Builder {\n    this._opts.quantizer = options ? { name: quantizer, options } : quantizer\n    return this\n  }\n\n  build (): Vibrant {\n    return new Vibrant(this._src, this._opts)\n  }\n\n  getPalette (cb?: Callback<Palette>): Promise<Palette> {\n    return this.build().getPalette(cb)\n  }\n  getSwatches (cb?: Callback<Palette>): Promise<Palette> {\n    return this.build().getPalette(cb)\n  }\n}\n","import {\n  ImageOptions,\n  ImageData as VibrantImageData,\n  ImageSource,\n  ImageCallback,\n  ImageBase\n} from '@vibrant/image'\n\nfunction isRelativeUrl (url: string): boolean {\n  let u = new URL(url, location.href)\n  return u.protocol === location.protocol &&\n    u.host === location.host &&\n    u.port === location.port\n}\n\nfunction isSameOrigin (a: string, b: string): boolean {\n  let ua = new URL(a)\n  let ub = new URL(b)\n\n  // https://developer.mozilla.org/en-US/docs/Web/Security/Same-origin_policy\n  return (\n    ua.protocol === ub.protocol &&\n    ua.hostname === ub.hostname &&\n    ua.port === ub.port\n  )\n}\n\nexport default class BrowserImage extends ImageBase {\n  image: HTMLImageElement\n  private _canvas: HTMLCanvasElement\n  private _context: CanvasRenderingContext2D\n  private _width: number\n  private _height: number\n  private _initCanvas (): void {\n    const img = this.image\n    const canvas = (this._canvas = document.createElement('canvas'))\n    const context = (canvas.getContext('2d'))\n\n    if (!context) throw new ReferenceError('Failed to create canvas context')\n\n    this._context = context\n\n    canvas.className = '@vibrant/canvas'\n    canvas.style.display = 'none'\n\n    this._width = canvas.width = img.width\n    this._height = canvas.height = img.height\n\n    context.drawImage(img, 0, 0)\n\n    document.body.appendChild(canvas)\n  }\n  load (image: ImageSource): Promise<ImageBase> {\n    let img: HTMLImageElement\n    let src: string\n    if (typeof image === 'string') {\n      img = document.createElement('img')\n      src = image\n\n      if (!isRelativeUrl(src) && !isSameOrigin(window.location.href, src)) {\n        img.crossOrigin = 'anonymous'\n      }\n\n      img.src = src\n    } else if (image instanceof HTMLImageElement) {\n      img = image\n      src = image.src\n    } else {\n      return Promise.reject(\n        new Error(`Cannot load buffer as an image in browser`)\n      )\n    }\n    this.image = img\n\n    return new Promise<ImageBase>((resolve, reject) => {\n      let onImageLoad = () => {\n        this._initCanvas()\n        resolve(this)\n      }\n\n      if (img.complete) {\n        // Already loaded\n        onImageLoad()\n      } else {\n        img.onload = onImageLoad\n        img.onerror = e => reject(new Error(`Fail to load image: ${src}`))\n      }\n    })\n  }\n  clear (): void {\n    this._context.clearRect(0, 0, this._width, this._height)\n  }\n  update (imageData: VibrantImageData): void {\n    this._context.putImageData(imageData as ImageData, 0, 0)\n  }\n  getWidth (): number {\n    return this._width\n  }\n  getHeight (): number {\n    return this._height\n  }\n  resize (targetWidth: number, targetHeight: number, ratio: number): void {\n    let { _canvas: canvas, _context: context, image: img } = this\n\n    this._width = canvas.width = targetWidth\n    this._height = canvas.height = targetHeight\n\n    context.scale(ratio, ratio)\n    context.drawImage(img, 0, 0)\n  }\n  getPixelCount (): number {\n    return this._width * this._height\n  }\n  getImageData (): ImageData {\n    return this._context.getImageData(0, 0, this._width, this._height)\n  }\n  remove (): void {\n    if (this._canvas && this._canvas.parentNode) {\n      this._canvas.parentNode.removeChild(this._canvas)\n    }\n  }\n}\n","import Vibrant = require('./browser')\nimport { WorkerPipeline } from '@vibrant/core/lib/pipeline/worker/client'\n\nconst PipelineWorker = require('./pipeline/index.worker')\n\nVibrant.use(new WorkerPipeline(PipelineWorker))\n\nexport = Vibrant\n","import { Pipeline, ProcessOptions, ProcessResult } from '../index'\nimport WorkerManager, { TaskWorkerClass } from '@vibrant/worker'\nimport { Swatch, Palette } from '@vibrant/color'\nimport { mapValues } from '../../utils'\n\n/**\n * Client side (runs in UI thread)\n */\nexport class WorkerPipeline implements Pipeline {\n  private _manager = new WorkerManager()\n  constructor (protected PipelineWorker: TaskWorkerClass) {\n    this._manager.register('pipeline', PipelineWorker)\n  }\n  private _rehydrate (result: ProcessResult) {\n    let { colors, palettes } = result\n    result.colors = colors.map((s) => Swatch.clone(s))\n\n    result.palettes = mapValues(palettes, (p) => mapValues(p, (c) => c ? Swatch.clone(c) : null) as Palette)\n    return result\n  }\n  process (imageData: ImageData, opts: ProcessOptions): Promise<ProcessResult> {\n    return this._manager.invokeWorker('pipeline', [imageData, opts], [imageData.data.buffer])\n      .then((result) => this._rehydrate(result as ProcessResult))\n  }\n}\n","import WorkerPool from './pool'\n\nexport interface TaskWorker extends Worker {\n  id: number\n  idle: boolean\n}\n\nexport interface TaskWorkerClass {\n  new(): TaskWorker\n}\n\nexport default class WorkerManager {\n  private _pools: { [name: string]: WorkerPool } = {}\n  register (name: string, WorkerClass: TaskWorkerClass) {\n    this._pools[name] = new WorkerPool(WorkerClass)\n  }\n  hasWorker (name: string) {\n    return !!this._pools[name]\n  }\n  getWorker (name: string) {\n    return this._pools[name]\n  }\n  invokeWorker<R> (name: string, args: any[], transferList?: any[]) {\n    return this.hasWorker(name)\n      ? this.getWorker(name).invoke<R>(args, transferList)\n      : Promise.reject(`Worker '${name}' does not exist`)\n  }\n}\n","import {\n  Defer,\n  defer\n} from '@vibrant/types'\nimport { TaskWorker, TaskWorkerClass } from './'\n\nimport {\n  WorkerRequest,\n  WorkerResponse,\n  WorkerErrorResponse\n} from './common'\n\ninterface Task<R> extends WorkerRequest {\n  deferred: Defer<R>\n}\n\n// const WorkerClass: TaskWorkerClass = require('worker-loader?inline=true!./worker')\n\nconst MAX_WORKER_COUNT = 5\nexport default class WorkerPool {\n  private _taskId = 0\n\n  private _workers: TaskWorker[] = []\n  private _queue: Task<{}>[] = []\n  private _executing: { [id: number]: Task<{}> } = {}\n\n  constructor (public WorkerClass: TaskWorkerClass) {\n\n  }\n\n  private _findIdleWorker (): TaskWorker | undefined {\n    let worker: TaskWorker | undefined\n    // if no idle worker && worker count < max count, make new one\n    if (this._workers.length === 0 || this._workers.length < MAX_WORKER_COUNT) {\n      worker = new this.WorkerClass()\n      worker.id = this._workers.length\n      worker.idle = true\n      this._workers.push(worker)\n      worker.onmessage = this._onMessage.bind(this, worker.id)\n    } else {\n      worker = this._workers.find(({ idle }) => idle)\n    }\n\n    return worker\n  }\n\n  private _enqueue<R> (payload: any[], transferList?: any[]): Promise<R> {\n    let d = defer<R>()\n\n    // make task item\n    let task: Task<R> = {\n      id: this._taskId++,\n      payload,\n      transferList,\n      deferred: d\n    }\n    this._queue.push(task)\n\n    // Try dequeue\n    this._tryDequeue()\n\n    return d.promise\n  }\n\n  private _tryDequeue () {\n    // Called when a work has finished or from _enqueue\n\n    // No pending task\n    if (this._queue.length <= 0) return\n\n    // Find idle worker\n    let worker = this._findIdleWorker()\n    // No idle worker\n    if (!worker) return\n\n    // Dequeue task\n    let task = this._queue.shift()!\n    this._executing[task.id] = task\n\n    // Send payload\n    let transfers = task.transferList\n    const { deferred, transferList, ...request } = task\n    worker.postMessage(request, transfers as any[])\n    worker.idle = false\n  }\n  private _onMessage (workerId: number, event: MessageEvent) {\n    let data: WorkerResponse<{}> | WorkerErrorResponse = event.data\n    if (!data) return\n    // Worker should send result along with payload id\n    let { id } = data\n    // Task is looked up by id\n    let task = this._executing[id]\n    delete this._executing[id]\n\n    // Resolve or reject deferred promise\n    switch (data.type) {\n      case 'return':\n        task.deferred.resolve(data.payload)\n        break\n      case 'error':\n        task.deferred.reject(new Error(data.payload))\n        break\n    }\n    // Update worker status\n    this._workers[workerId].idle = true\n    // Try dequeue next task\n    this._tryDequeue()\n  }\n  invoke<R> (args: any[], transferList?: any[]): Promise<R> {\n    return this._enqueue(args, transferList)\n  }\n}\n","export interface Callback<T> {\n  (err?: Error, result?: T): void\n}\n\nexport type Resolvable<T> = T | Promise<T>\n\nexport interface IndexedObject {\n  [key: string]: any\n}\n\nexport class Defer<R> {\n  resolve: (thenableOrResult: R | Promise<R>) => void\n  reject: (error: any) => void\n  promise: Promise<R>\n  constructor () {\n    this.promise = new Promise<R>((_resolve, _reject) => {\n      this.resolve = _resolve\n      this.reject = _reject\n    })\n  }\n}\n\nexport function defer<R> (): Defer<R> {\n  return new Defer<R>()\n}\n","module.exports = function() {\n  return require(\"!!/Users/crutchcorn/git/Etc/node-vibrant/packages/node-vibrant/node_modules/worker-loader/dist/workers/InlineWorker.js\")(\"/******/ (function(modules) { // webpackBootstrap\\n/******/ \\t// The module cache\\n/******/ \\tvar installedModules = {};\\n/******/\\n/******/ \\t// The require function\\n/******/ \\tfunction __webpack_require__(moduleId) {\\n/******/\\n/******/ \\t\\t// Check if module is in cache\\n/******/ \\t\\tif(installedModules[moduleId]) {\\n/******/ \\t\\t\\treturn installedModules[moduleId].exports;\\n/******/ \\t\\t}\\n/******/ \\t\\t// Create a new module (and put it into the cache)\\n/******/ \\t\\tvar module = installedModules[moduleId] = {\\n/******/ \\t\\t\\ti: moduleId,\\n/******/ \\t\\t\\tl: false,\\n/******/ \\t\\t\\texports: {}\\n/******/ \\t\\t};\\n/******/\\n/******/ \\t\\t// Execute the module function\\n/******/ \\t\\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\\n/******/\\n/******/ \\t\\t// Flag the module as loaded\\n/******/ \\t\\tmodule.l = true;\\n/******/\\n/******/ \\t\\t// Return the exports of the module\\n/******/ \\t\\treturn module.exports;\\n/******/ \\t}\\n/******/\\n/******/\\n/******/ \\t// expose the modules object (__webpack_modules__)\\n/******/ \\t__webpack_require__.m = modules;\\n/******/\\n/******/ \\t// expose the module cache\\n/******/ \\t__webpack_require__.c = installedModules;\\n/******/\\n/******/ \\t// define getter function for harmony exports\\n/******/ \\t__webpack_require__.d = function(exports, name, getter) {\\n/******/ \\t\\tif(!__webpack_require__.o(exports, name)) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\\n/******/ \\t\\t}\\n/******/ \\t};\\n/******/\\n/******/ \\t// define __esModule on exports\\n/******/ \\t__webpack_require__.r = function(exports) {\\n/******/ \\t\\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\\n/******/ \\t\\t\\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\\n/******/ \\t\\t}\\n/******/ \\t\\tObject.defineProperty(exports, '__esModule', { value: true });\\n/******/ \\t};\\n/******/\\n/******/ \\t// create a fake namespace object\\n/******/ \\t// mode & 1: value is a module id, require it\\n/******/ \\t// mode & 2: merge all properties of value into the ns\\n/******/ \\t// mode & 4: return value when already ns object\\n/******/ \\t// mode & 8|1: behave like require\\n/******/ \\t__webpack_require__.t = function(value, mode) {\\n/******/ \\t\\tif(mode & 1) value = __webpack_require__(value);\\n/******/ \\t\\tif(mode & 8) return value;\\n/******/ \\t\\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\\n/******/ \\t\\tvar ns = Object.create(null);\\n/******/ \\t\\t__webpack_require__.r(ns);\\n/******/ \\t\\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\\n/******/ \\t\\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\\n/******/ \\t\\treturn ns;\\n/******/ \\t};\\n/******/\\n/******/ \\t// getDefaultExport function for compatibility with non-harmony modules\\n/******/ \\t__webpack_require__.n = function(module) {\\n/******/ \\t\\tvar getter = module && module.__esModule ?\\n/******/ \\t\\t\\tfunction getDefault() { return module['default']; } :\\n/******/ \\t\\t\\tfunction getModuleExports() { return module; };\\n/******/ \\t\\t__webpack_require__.d(getter, 'a', getter);\\n/******/ \\t\\treturn getter;\\n/******/ \\t};\\n/******/\\n/******/ \\t// Object.prototype.hasOwnProperty.call\\n/******/ \\t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\\n/******/\\n/******/ \\t// __webpack_public_path__\\n/******/ \\t__webpack_require__.p = \\\"\\\";\\n/******/\\n/******/\\n/******/ \\t// Load entry module and return exports\\n/******/ \\treturn __webpack_require__(__webpack_require__.s = 2);\\n/******/ })\\n/************************************************************************/\\n/******/ ([\\n/* 0 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.Swatch = void 0;\\nvar converter_1 = __webpack_require__(1);\\nvar Swatch = /** @class */ (function () {\\n    function Swatch(rgb, population) {\\n        this._rgb = rgb;\\n        this._population = population;\\n    }\\n    Swatch.applyFilters = function (colors, filters) {\\n        return filters.length > 0\\n            ? colors.filter(function (_a) {\\n                var r = _a.r, g = _a.g, b = _a.b;\\n                for (var j = 0; j < filters.length; j++) {\\n                    if (!filters[j](r, g, b, 255))\\n                        return false;\\n                }\\n                return true;\\n            })\\n            : colors;\\n    };\\n    /**\\n     * Make a value copy of a swatch based on a previous one. Returns a new Swatch instance\\n     * @param {Swatch} swatch\\n     */\\n    Swatch.clone = function (swatch) {\\n        return new Swatch(swatch._rgb, swatch._population);\\n    };\\n    Object.defineProperty(Swatch.prototype, \\\"r\\\", {\\n        /**\\n         * The red value in the RGB value\\n         */\\n        get: function () {\\n            return this._rgb[0];\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"g\\\", {\\n        /**\\n         * The green value in the RGB value\\n         */\\n        get: function () {\\n            return this._rgb[1];\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"b\\\", {\\n        /**\\n         * The blue value in the RGB value\\n         */\\n        get: function () {\\n            return this._rgb[2];\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"rgb\\\", {\\n        /**\\n         * The color value as a rgb value\\n         */\\n        get: function () {\\n            return this._rgb;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"hsl\\\", {\\n        /**\\n         * The color value as a hsl value\\n         */\\n        get: function () {\\n            if (!this._hsl) {\\n                var _a = this._rgb, r = _a[0], g = _a[1], b = _a[2];\\n                this._hsl = converter_1.rgbToHsl(r, g, b);\\n            }\\n            return this._hsl;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"hex\\\", {\\n        /**\\n         * The color value as a hex string\\n         */\\n        get: function () {\\n            if (!this._hex) {\\n                var _a = this._rgb, r = _a[0], g = _a[1], b = _a[2];\\n                this._hex = converter_1.rgbToHex(r, g, b);\\n            }\\n            return this._hex;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"population\\\", {\\n        get: function () {\\n            return this._population;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    /**\\n     * Get the JSON object for the swatch\\n     */\\n    Swatch.prototype.toJSON = function () {\\n        return {\\n            rgb: this.rgb,\\n            population: this.population\\n        };\\n    };\\n    /**\\n     * Get the color value as a rgb value\\n     * @deprecated Use property instead\\n     */\\n    // TODO: deprecate internally, use property instead\\n    Swatch.prototype.getRgb = function () {\\n        return this._rgb;\\n    };\\n    /**\\n     * Get the color value as a hsl value\\n     * @deprecated Use property instead\\n     */\\n    // TODO: deprecate internally, use property instead\\n    Swatch.prototype.getHsl = function () {\\n        return this.hsl;\\n    };\\n    /**\\n     * @deprecated Use property instead\\n     */\\n    // TODO: deprecate internally, use property instead\\n    Swatch.prototype.getPopulation = function () {\\n        return this._population;\\n    };\\n    /**\\n     * Get the color value as a hex string\\n     * @deprecated Use property instead\\n     */\\n    // TODO: deprecate internally, use property instead\\n    Swatch.prototype.getHex = function () {\\n        return this.hex;\\n    };\\n    Swatch.prototype.getYiq = function () {\\n        if (!this._yiq) {\\n            var rgb = this._rgb;\\n            this._yiq = (rgb[0] * 299 + rgb[1] * 587 + rgb[2] * 114) / 1000;\\n        }\\n        return this._yiq;\\n    };\\n    Object.defineProperty(Swatch.prototype, \\\"titleTextColor\\\", {\\n        get: function () {\\n            if (this._titleTextColor) {\\n                this._titleTextColor = this.getYiq() < 200 ? '#fff' : '#000';\\n            }\\n            return this._titleTextColor;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Object.defineProperty(Swatch.prototype, \\\"bodyTextColor\\\", {\\n        get: function () {\\n            if (this._bodyTextColor) {\\n                this._bodyTextColor = this.getYiq() < 150 ? '#fff' : '#000';\\n            }\\n            return this._bodyTextColor;\\n        },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    Swatch.prototype.getTitleTextColor = function () {\\n        return this.titleTextColor;\\n    };\\n    Swatch.prototype.getBodyTextColor = function () {\\n        return this.bodyTextColor;\\n    };\\n    return Swatch;\\n}());\\nexports.Swatch = Swatch;\\n\\n\\n/***/ }),\\n/* 1 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.getColorDiffStatus = exports.hexDiff = exports.rgbDiff = exports.deltaE94 = exports.rgbToCIELab = exports.xyzToCIELab = exports.rgbToXyz = exports.hslToRgb = exports.rgbToHsl = exports.rgbToHex = exports.hexToRgb = exports.DELTAE94_DIFF_STATUS = void 0;\\nexports.DELTAE94_DIFF_STATUS = {\\n    NA: 0,\\n    PERFECT: 1,\\n    CLOSE: 2,\\n    GOOD: 10,\\n    SIMILAR: 50\\n};\\n/**\\n * Converts hex string to RGB\\n * @param hex - The hex value you with to get the RGB value of\\n * @returns an array in the order of `red, green, blue` numerical values\\n */\\nfunction hexToRgb(hex) {\\n    var m = /^#?([a-f\\\\d]{2})([a-f\\\\d]{2})([a-f\\\\d]{2})$/i.exec(hex);\\n    if (!m)\\n        throw new RangeError(\\\"'\\\" + hex + \\\"' is not a valid hex color\\\");\\n    return [m[1], m[2], m[3]].map(function (s) { return parseInt(s, 16); });\\n}\\nexports.hexToRgb = hexToRgb;\\n/**\\n * Given values for an RGB color convert to and return a valid HEX string\\n * @param r - Red value in RGB\\n * @param g - Green value in RGB\\n * @param b - Blue value in RGB\\n * @returns a valid hex string with pre-pending pound sign\\n */\\nfunction rgbToHex(r, g, b) {\\n    return '#' + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1, 7);\\n}\\nexports.rgbToHex = rgbToHex;\\n/**\\n * Given values for an RGB color convert to and return a valid HSL value\\n * @param r - Red value in RGB\\n * @param g - Green value in RGB\\n * @param b - Blue value in RGB\\n * @returns an array in the order of `hue, saturation, light` numerical values\\n */\\nfunction rgbToHsl(r, g, b) {\\n    r /= 255;\\n    g /= 255;\\n    b /= 255;\\n    var max = Math.max(r, g, b);\\n    var min = Math.min(r, g, b);\\n    var h = 0;\\n    var s = 0;\\n    var l = (max + min) / 2;\\n    if (max !== min) {\\n        var d = max - min;\\n        s = l > 0.5 ? d / (2 - max - min) : d / (max + min);\\n        switch (max) {\\n            case r:\\n                h = (g - b) / d + (g < b ? 6 : 0);\\n                break;\\n            case g:\\n                h = (b - r) / d + 2;\\n                break;\\n            case b:\\n                h = (r - g) / d + 4;\\n                break;\\n        }\\n        h /= 6;\\n    }\\n    return [h, s, l];\\n}\\nexports.rgbToHsl = rgbToHsl;\\nfunction hslToRgb(h, s, l) {\\n    var r;\\n    var g;\\n    var b;\\n    function hue2rgb(p, q, t) {\\n        if (t < 0)\\n            t += 1;\\n        if (t > 1)\\n            t -= 1;\\n        if (t < 1 / 6)\\n            return p + (q - p) * 6 * t;\\n        if (t < 1 / 2)\\n            return q;\\n        if (t < 2 / 3)\\n            return p + (q - p) * (2 / 3 - t) * 6;\\n        return p;\\n    }\\n    if (s === 0) {\\n        r = g = b = l;\\n    }\\n    else {\\n        var q = l < 0.5 ? l * (1 + s) : l + s - (l * s);\\n        var p = 2 * l - q;\\n        r = hue2rgb(p, q, h + 1 / 3);\\n        g = hue2rgb(p, q, h);\\n        b = hue2rgb(p, q, h - (1 / 3));\\n    }\\n    return [\\n        r * 255,\\n        g * 255,\\n        b * 255\\n    ];\\n}\\nexports.hslToRgb = hslToRgb;\\nfunction rgbToXyz(r, g, b) {\\n    r /= 255;\\n    g /= 255;\\n    b /= 255;\\n    r = r > 0.04045 ? Math.pow((r + 0.005) / 1.055, 2.4) : r / 12.92;\\n    g = g > 0.04045 ? Math.pow((g + 0.005) / 1.055, 2.4) : g / 12.92;\\n    b = b > 0.04045 ? Math.pow((b + 0.005) / 1.055, 2.4) : b / 12.92;\\n    r *= 100;\\n    g *= 100;\\n    b *= 100;\\n    var x = r * 0.4124 + g * 0.3576 + b * 0.1805;\\n    var y = r * 0.2126 + g * 0.7152 + b * 0.0722;\\n    var z = r * 0.0193 + g * 0.1192 + b * 0.9505;\\n    return [x, y, z];\\n}\\nexports.rgbToXyz = rgbToXyz;\\nfunction xyzToCIELab(x, y, z) {\\n    var REF_X = 95.047;\\n    var REF_Y = 100;\\n    var REF_Z = 108.883;\\n    x /= REF_X;\\n    y /= REF_Y;\\n    z /= REF_Z;\\n    x = x > 0.008856 ? Math.pow(x, 1 / 3) : 7.787 * x + 16 / 116;\\n    y = y > 0.008856 ? Math.pow(y, 1 / 3) : 7.787 * y + 16 / 116;\\n    z = z > 0.008856 ? Math.pow(z, 1 / 3) : 7.787 * z + 16 / 116;\\n    var L = 116 * y - 16;\\n    var a = 500 * (x - y);\\n    var b = 200 * (y - z);\\n    return [L, a, b];\\n}\\nexports.xyzToCIELab = xyzToCIELab;\\nfunction rgbToCIELab(r, g, b) {\\n    var _a = rgbToXyz(r, g, b), x = _a[0], y = _a[1], z = _a[2];\\n    return xyzToCIELab(x, y, z);\\n}\\nexports.rgbToCIELab = rgbToCIELab;\\nfunction deltaE94(lab1, lab2) {\\n    var WEIGHT_L = 1;\\n    var WEIGHT_C = 1;\\n    var WEIGHT_H = 1;\\n    var L1 = lab1[0], a1 = lab1[1], b1 = lab1[2];\\n    var L2 = lab2[0], a2 = lab2[1], b2 = lab2[2];\\n    var dL = L1 - L2;\\n    var da = a1 - a2;\\n    var db = b1 - b2;\\n    var xC1 = Math.sqrt(a1 * a1 + b1 * b1);\\n    var xC2 = Math.sqrt(a2 * a2 + b2 * b2);\\n    var xDL = L2 - L1;\\n    var xDC = xC2 - xC1;\\n    var xDE = Math.sqrt(dL * dL + da * da + db * db);\\n    var xDH = (Math.sqrt(xDE) > Math.sqrt(Math.abs(xDL)) + Math.sqrt(Math.abs(xDC)))\\n        ? Math.sqrt(xDE * xDE - xDL * xDL - xDC * xDC)\\n        : 0;\\n    var xSC = 1 + 0.045 * xC1;\\n    var xSH = 1 + 0.015 * xC1;\\n    xDL /= WEIGHT_L;\\n    xDC /= WEIGHT_C * xSC;\\n    xDH /= WEIGHT_H * xSH;\\n    return Math.sqrt(xDL * xDL + xDC * xDC + xDH * xDH);\\n}\\nexports.deltaE94 = deltaE94;\\nfunction rgbDiff(rgb1, rgb2) {\\n    var lab1 = rgbToCIELab.apply(undefined, rgb1);\\n    var lab2 = rgbToCIELab.apply(undefined, rgb2);\\n    return deltaE94(lab1, lab2);\\n}\\nexports.rgbDiff = rgbDiff;\\nfunction hexDiff(hex1, hex2) {\\n    var rgb1 = hexToRgb(hex1);\\n    var rgb2 = hexToRgb(hex2);\\n    return rgbDiff(rgb1, rgb2);\\n}\\nexports.hexDiff = hexDiff;\\nfunction getColorDiffStatus(d) {\\n    if (d < exports.DELTAE94_DIFF_STATUS.NA) {\\n        return 'N/A';\\n    }\\n    // Not perceptible by human eyes\\n    if (d <= exports.DELTAE94_DIFF_STATUS.PERFECT) {\\n        return 'Perfect';\\n    }\\n    // Perceptible through close observation\\n    if (d <= exports.DELTAE94_DIFF_STATUS.CLOSE) {\\n        return 'Close';\\n    }\\n    // Perceptible at a glance\\n    if (d <= exports.DELTAE94_DIFF_STATUS.GOOD) {\\n        return 'Good';\\n    }\\n    // Colors are more similar than opposite\\n    if (d < exports.DELTAE94_DIFF_STATUS.SIMILAR) {\\n        return 'Similar';\\n    }\\n    return 'Wrong';\\n}\\nexports.getColorDiffStatus = getColorDiffStatus;\\n\\n\\n/***/ }),\\n/* 2 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar host_1 = __importDefault(__webpack_require__(3));\\nvar _1 = __importDefault(__webpack_require__(5));\\nhost_1.default(self, _1.default);\\n\\n\\n/***/ }),\\n/* 3 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar worker_1 = __importDefault(__webpack_require__(4));\\nfunction runPipelineInWorker(self, pipeline) {\\n    worker_1.default(self, function (imageData, opts) {\\n        return pipeline.process(imageData, opts);\\n    });\\n}\\nexports.default = runPipelineInWorker;\\n\\n\\n/***/ }),\\n/* 4 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nfunction runInWorker(self, fn) {\\n    self.onmessage = function (event) {\\n        var data = event.data;\\n        var id = data.id, payload = data.payload;\\n        var response;\\n        Promise.resolve(fn.apply(void 0, payload))\\n            .then(function (ret) {\\n            self.postMessage({\\n                id: id,\\n                type: 'return',\\n                payload: ret\\n            });\\n        })\\n            .catch(function (e) {\\n            self.postMessage({\\n                id: id,\\n                type: 'error',\\n                payload: e.message\\n            });\\n        });\\n    };\\n}\\nexports.default = runInWorker;\\n\\n\\n/***/ }),\\n/* 5 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar quantizer_mmcq_1 = __importDefault(__webpack_require__(6));\\nvar generator_default_1 = __importDefault(__webpack_require__(10));\\nvar pipeline_1 = __webpack_require__(11);\\nvar pipeline = new pipeline_1.BasicPipeline()\\n    .filter.register('default', function (r, g, b, a) {\\n    return a >= 125\\n        && !(r > 250 && g > 250 && b > 250);\\n})\\n    .quantizer.register('mmcq', quantizer_mmcq_1.default)\\n    .generator.register('default', generator_default_1.default);\\nexports.default = pipeline;\\n\\n\\n/***/ }),\\n/* 6 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar color_1 = __webpack_require__(0);\\nvar vbox_1 = __importDefault(__webpack_require__(7));\\nvar pqueue_1 = __importDefault(__webpack_require__(9));\\nvar fractByPopulations = 0.75;\\nfunction _splitBoxes(pq, target) {\\n    var lastSize = pq.size();\\n    while (pq.size() < target) {\\n        var vbox = pq.pop();\\n        if (vbox && vbox.count() > 0) {\\n            var _a = vbox.split(), vbox1 = _a[0], vbox2 = _a[1];\\n            pq.push(vbox1);\\n            if (vbox2 && vbox2.count() > 0)\\n                pq.push(vbox2);\\n            // No more new boxes, converged\\n            if (pq.size() === lastSize) {\\n                break;\\n            }\\n            else {\\n                lastSize = pq.size();\\n            }\\n        }\\n        else {\\n            break;\\n        }\\n    }\\n}\\nvar MMCQ = function (pixels, opts) {\\n    if (pixels.length === 0 || opts.colorCount < 2 || opts.colorCount > 256) {\\n        throw new Error('Wrong MMCQ parameters');\\n    }\\n    var vbox = vbox_1.default.build(pixels);\\n    var colorCount = vbox.histogram.colorCount;\\n    var pq = new pqueue_1.default(function (a, b) { return a.count() - b.count(); });\\n    pq.push(vbox);\\n    // first set of colors, sorted by population\\n    _splitBoxes(pq, fractByPopulations * opts.colorCount);\\n    // Re-order\\n    var pq2 = new pqueue_1.default(function (a, b) { return a.count() * a.volume() - b.count() * b.volume(); });\\n    pq2.contents = pq.contents;\\n    // next set - generate the median cuts using the (npix * vol) sorting.\\n    _splitBoxes(pq2, opts.colorCount - pq2.size());\\n    // calculate the actual colors\\n    return generateSwatches(pq2);\\n};\\nfunction generateSwatches(pq) {\\n    var swatches = [];\\n    while (pq.size()) {\\n        var v = pq.pop();\\n        var color = v.avg();\\n        var r = color[0], g = color[1], b = color[2];\\n        swatches.push(new color_1.Swatch(color, v.count()));\\n    }\\n    return swatches;\\n}\\nexports.default = MMCQ;\\n\\n\\n/***/ }),\\n/* 7 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __importDefault = (this && this.__importDefault) || function (mod) {\\n    return (mod && mod.__esModule) ? mod : { \\\"default\\\": mod };\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar histogram_1 = __importDefault(__webpack_require__(8));\\nvar SIGBITS = 5;\\nvar RSHIFT = 8 - SIGBITS;\\nvar VBox = /** @class */ (function () {\\n    function VBox(r1, r2, g1, g2, b1, b2, histogram) {\\n        this.histogram = histogram;\\n        this._volume = -1;\\n        this._count = -1;\\n        // NOTE: dimension will be mutated by split operation.\\n        //       It must be specified explicitly, not from histogram\\n        this.dimension = { r1: r1, r2: r2, g1: g1, g2: g2, b1: b1, b2: b2 };\\n    }\\n    VBox.build = function (pixels) {\\n        var h = new histogram_1.default(pixels, { sigBits: SIGBITS });\\n        var rmin = h.rmin, rmax = h.rmax, gmin = h.gmin, gmax = h.gmax, bmin = h.bmin, bmax = h.bmax;\\n        return new VBox(rmin, rmax, gmin, gmax, bmin, bmax, h);\\n    };\\n    VBox.prototype.invalidate = function () {\\n        this._volume = this._count = -1;\\n        this._avg = null;\\n    };\\n    VBox.prototype.volume = function () {\\n        if (this._volume < 0) {\\n            var _a = this.dimension, r1 = _a.r1, r2 = _a.r2, g1 = _a.g1, g2 = _a.g2, b1 = _a.b1, b2 = _a.b2;\\n            this._volume = (r2 - r1 + 1) * (g2 - g1 + 1) * (b2 - b1 + 1);\\n        }\\n        return this._volume;\\n    };\\n    VBox.prototype.count = function () {\\n        if (this._count < 0) {\\n            var _a = this.histogram, hist = _a.hist, getColorIndex = _a.getColorIndex;\\n            var _b = this.dimension, r1 = _b.r1, r2 = _b.r2, g1 = _b.g1, g2 = _b.g2, b1 = _b.b1, b2 = _b.b2;\\n            var c = 0;\\n            for (var r = r1; r <= r2; r++) {\\n                for (var g = g1; g <= g2; g++) {\\n                    for (var b = b1; b <= b2; b++) {\\n                        var index = getColorIndex(r, g, b);\\n                        c += hist[index];\\n                    }\\n                }\\n            }\\n            this._count = c;\\n        }\\n        return this._count;\\n    };\\n    VBox.prototype.clone = function () {\\n        var histogram = this.histogram;\\n        var _a = this.dimension, r1 = _a.r1, r2 = _a.r2, g1 = _a.g1, g2 = _a.g2, b1 = _a.b1, b2 = _a.b2;\\n        return new VBox(r1, r2, g1, g2, b1, b2, histogram);\\n    };\\n    VBox.prototype.avg = function () {\\n        if (!this._avg) {\\n            var _a = this.histogram, hist = _a.hist, getColorIndex = _a.getColorIndex;\\n            var _b = this.dimension, r1 = _b.r1, r2 = _b.r2, g1 = _b.g1, g2 = _b.g2, b1 = _b.b1, b2 = _b.b2;\\n            var ntot = 0;\\n            var mult = 1 << (8 - SIGBITS);\\n            var rsum = void 0;\\n            var gsum = void 0;\\n            var bsum = void 0;\\n            rsum = gsum = bsum = 0;\\n            for (var r = r1; r <= r2; r++) {\\n                for (var g = g1; g <= g2; g++) {\\n                    for (var b = b1; b <= b2; b++) {\\n                        var index = getColorIndex(r, g, b);\\n                        var h = hist[index];\\n                        ntot += h;\\n                        rsum += (h * (r + 0.5) * mult);\\n                        gsum += (h * (g + 0.5) * mult);\\n                        bsum += (h * (b + 0.5) * mult);\\n                    }\\n                }\\n            }\\n            if (ntot) {\\n                this._avg = [\\n                    ~~(rsum / ntot),\\n                    ~~(gsum / ntot),\\n                    ~~(bsum / ntot)\\n                ];\\n            }\\n            else {\\n                this._avg = [\\n                    ~~(mult * (r1 + r2 + 1) / 2),\\n                    ~~(mult * (g1 + g2 + 1) / 2),\\n                    ~~(mult * (b1 + b2 + 1) / 2)\\n                ];\\n            }\\n        }\\n        return this._avg;\\n    };\\n    VBox.prototype.contains = function (rgb) {\\n        var r = rgb[0], g = rgb[1], b = rgb[2];\\n        var _a = this.dimension, r1 = _a.r1, r2 = _a.r2, g1 = _a.g1, g2 = _a.g2, b1 = _a.b1, b2 = _a.b2;\\n        r >>= RSHIFT;\\n        g >>= RSHIFT;\\n        b >>= RSHIFT;\\n        return r >= r1 && r <= r2\\n            && g >= g1 && g <= g2\\n            && b >= b1 && b <= b2;\\n    };\\n    VBox.prototype.split = function () {\\n        var _a = this.histogram, hist = _a.hist, getColorIndex = _a.getColorIndex;\\n        var _b = this.dimension, r1 = _b.r1, r2 = _b.r2, g1 = _b.g1, g2 = _b.g2, b1 = _b.b1, b2 = _b.b2;\\n        var count = this.count();\\n        if (!count)\\n            return [];\\n        if (count === 1)\\n            return [this.clone()];\\n        var rw = r2 - r1 + 1;\\n        var gw = g2 - g1 + 1;\\n        var bw = b2 - b1 + 1;\\n        var maxw = Math.max(rw, gw, bw);\\n        var accSum = null;\\n        var sum;\\n        var total;\\n        sum = total = 0;\\n        var maxd = null;\\n        if (maxw === rw) {\\n            maxd = 'r';\\n            accSum = new Uint32Array(r2 + 1);\\n            for (var r = r1; r <= r2; r++) {\\n                sum = 0;\\n                for (var g = g1; g <= g2; g++) {\\n                    for (var b = b1; b <= b2; b++) {\\n                        var index = getColorIndex(r, g, b);\\n                        sum += hist[index];\\n                    }\\n                }\\n                total += sum;\\n                accSum[r] = total;\\n            }\\n        }\\n        else if (maxw === gw) {\\n            maxd = 'g';\\n            accSum = new Uint32Array(g2 + 1);\\n            for (var g = g1; g <= g2; g++) {\\n                sum = 0;\\n                for (var r = r1; r <= r2; r++) {\\n                    for (var b = b1; b <= b2; b++) {\\n                        var index = getColorIndex(r, g, b);\\n                        sum += hist[index];\\n                    }\\n                }\\n                total += sum;\\n                accSum[g] = total;\\n            }\\n        }\\n        else {\\n            maxd = 'b';\\n            accSum = new Uint32Array(b2 + 1);\\n            for (var b = b1; b <= b2; b++) {\\n                sum = 0;\\n                for (var r = r1; r <= r2; r++) {\\n                    for (var g = g1; g <= g2; g++) {\\n                        var index = getColorIndex(r, g, b);\\n                        sum += hist[index];\\n                    }\\n                }\\n                total += sum;\\n                accSum[b] = total;\\n            }\\n        }\\n        var splitPoint = -1;\\n        var reverseSum = new Uint32Array(accSum.length);\\n        for (var i = 0; i < accSum.length; i++) {\\n            var d = accSum[i];\\n            if (splitPoint < 0 && d > total / 2)\\n                splitPoint = i;\\n            reverseSum[i] = total - d;\\n        }\\n        var vbox = this;\\n        function doCut(d) {\\n            var dim1 = d + '1';\\n            var dim2 = d + '2';\\n            var d1 = vbox.dimension[dim1];\\n            var d2 = vbox.dimension[dim2];\\n            var vbox1 = vbox.clone();\\n            var vbox2 = vbox.clone();\\n            var left = splitPoint - d1;\\n            var right = d2 - splitPoint;\\n            if (left <= right) {\\n                d2 = Math.min(d2 - 1, ~~(splitPoint + right / 2));\\n                d2 = Math.max(0, d2);\\n            }\\n            else {\\n                d2 = Math.max(d1, ~~(splitPoint - 1 - left / 2));\\n                d2 = Math.min(vbox.dimension[dim2], d2);\\n            }\\n            while (!accSum[d2])\\n                d2++;\\n            var c2 = reverseSum[d2];\\n            while (!c2 && accSum[d2 - 1])\\n                c2 = reverseSum[--d2];\\n            vbox1.dimension[dim2] = d2;\\n            vbox2.dimension[dim1] = d2 + 1;\\n            return [vbox1, vbox2];\\n        }\\n        return doCut(maxd);\\n    };\\n    return VBox;\\n}());\\nexports.default = VBox;\\n\\n\\n/***/ }),\\n/* 8 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar Histogram = /** @class */ (function () {\\n    function Histogram(pixels, opts) {\\n        this.pixels = pixels;\\n        this.opts = opts;\\n        var sigBits = opts.sigBits;\\n        var getColorIndex = function (r, g, b) {\\n            return (r << (2 * sigBits)) + (g << sigBits) + b;\\n        };\\n        this.getColorIndex = getColorIndex;\\n        var rshift = 8 - sigBits;\\n        var hn = 1 << (3 * sigBits);\\n        var hist = new Uint32Array(hn);\\n        var rmax;\\n        var rmin;\\n        var gmax;\\n        var gmin;\\n        var bmax;\\n        var bmin;\\n        var r;\\n        var g;\\n        var b;\\n        var a;\\n        rmax = gmax = bmax = 0;\\n        rmin = gmin = bmin = Number.MAX_VALUE;\\n        var n = pixels.length / 4;\\n        var i = 0;\\n        while (i < n) {\\n            var offset = i * 4;\\n            i++;\\n            r = pixels[offset + 0];\\n            g = pixels[offset + 1];\\n            b = pixels[offset + 2];\\n            a = pixels[offset + 3];\\n            // Ignored pixels' alpha is marked as 0 in filtering stage\\n            if (a === 0)\\n                continue;\\n            r = r >> rshift;\\n            g = g >> rshift;\\n            b = b >> rshift;\\n            var index = getColorIndex(r, g, b);\\n            hist[index] += 1;\\n            if (r > rmax)\\n                rmax = r;\\n            if (r < rmin)\\n                rmin = r;\\n            if (g > gmax)\\n                gmax = g;\\n            if (g < gmin)\\n                gmin = g;\\n            if (b > bmax)\\n                bmax = b;\\n            if (b < bmin)\\n                bmin = b;\\n        }\\n        this._colorCount = hist.reduce(function (total, c) { return c > 0 ? total + 1 : total; }, 0);\\n        this.hist = hist;\\n        this.rmax = rmax;\\n        this.rmin = rmin;\\n        this.gmax = gmax;\\n        this.gmin = gmin;\\n        this.bmax = bmax;\\n        this.bmin = bmin;\\n    }\\n    Object.defineProperty(Histogram.prototype, \\\"colorCount\\\", {\\n        get: function () { return this._colorCount; },\\n        enumerable: false,\\n        configurable: true\\n    });\\n    return Histogram;\\n}());\\nexports.default = Histogram;\\n\\n\\n/***/ }),\\n/* 9 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar PQueue = /** @class */ (function () {\\n    function PQueue(comparator) {\\n        this._comparator = comparator;\\n        this.contents = [];\\n        this._sorted = false;\\n    }\\n    PQueue.prototype._sort = function () {\\n        if (!this._sorted) {\\n            this.contents.sort(this._comparator);\\n            this._sorted = true;\\n        }\\n    };\\n    PQueue.prototype.push = function (item) {\\n        this.contents.push(item);\\n        this._sorted = false;\\n    };\\n    PQueue.prototype.peek = function (index) {\\n        this._sort();\\n        index = typeof index === 'number' ? index : this.contents.length - 1;\\n        return this.contents[index];\\n    };\\n    PQueue.prototype.pop = function () {\\n        this._sort();\\n        return this.contents.pop();\\n    };\\n    PQueue.prototype.size = function () {\\n        return this.contents.length;\\n    };\\n    PQueue.prototype.map = function (mapper) {\\n        this._sort();\\n        return this.contents.map(mapper);\\n    };\\n    return PQueue;\\n}());\\nexports.default = PQueue;\\n\\n\\n/***/ }),\\n/* 10 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nvar color_1 = __webpack_require__(0);\\nvar converter_1 = __webpack_require__(1);\\nvar DefaultOpts = {\\n    targetDarkLuma: 0.26,\\n    maxDarkLuma: 0.45,\\n    minLightLuma: 0.55,\\n    targetLightLuma: 0.74,\\n    minNormalLuma: 0.3,\\n    targetNormalLuma: 0.5,\\n    maxNormalLuma: 0.7,\\n    targetMutesSaturation: 0.3,\\n    maxMutesSaturation: 0.4,\\n    targetVibrantSaturation: 1.0,\\n    minVibrantSaturation: 0.35,\\n    weightSaturation: 3,\\n    weightLuma: 6.5,\\n    weightPopulation: 0.5\\n};\\nfunction _findMaxPopulation(swatches) {\\n    var p = 0;\\n    swatches.forEach(function (s) {\\n        p = Math.max(p, s.population);\\n    });\\n    return p;\\n}\\nfunction _isAlreadySelected(palette, s) {\\n    return palette.Vibrant === s\\n        || palette.DarkVibrant === s\\n        || palette.LightVibrant === s\\n        || palette.Muted === s\\n        || palette.DarkMuted === s\\n        || palette.LightMuted === s;\\n}\\nfunction _createComparisonValue(saturation, targetSaturation, luma, targetLuma, population, maxPopulation, opts) {\\n    function weightedMean() {\\n        var values = [];\\n        for (var _i = 0; _i < arguments.length; _i++) {\\n            values[_i] = arguments[_i];\\n        }\\n        var sum = 0;\\n        var weightSum = 0;\\n        for (var i = 0; i < values.length; i += 2) {\\n            var value = values[i];\\n            var weight = values[i + 1];\\n            sum += value * weight;\\n            weightSum += weight;\\n        }\\n        return sum / weightSum;\\n    }\\n    function invertDiff(value, targetValue) {\\n        return 1 - Math.abs(value - targetValue);\\n    }\\n    return weightedMean(invertDiff(saturation, targetSaturation), opts.weightSaturation, invertDiff(luma, targetLuma), opts.weightLuma, population / maxPopulation, opts.weightPopulation);\\n}\\nfunction _findColorVariation(palette, swatches, maxPopulation, targetLuma, minLuma, maxLuma, targetSaturation, minSaturation, maxSaturation, opts) {\\n    var max = null;\\n    var maxValue = 0;\\n    swatches.forEach(function (swatch) {\\n        var _a = swatch.hsl, s = _a[1], l = _a[2];\\n        if (s >= minSaturation && s <= maxSaturation\\n            && l >= minLuma && l <= maxLuma\\n            && !_isAlreadySelected(palette, swatch)) {\\n            var value = _createComparisonValue(s, targetSaturation, l, targetLuma, swatch.population, maxPopulation, opts);\\n            if (max === null || value > maxValue) {\\n                max = swatch;\\n                maxValue = value;\\n            }\\n        }\\n    });\\n    return max;\\n}\\nfunction _generateVariationColors(swatches, maxPopulation, opts) {\\n    var palette = {\\n        Vibrant: null,\\n        DarkVibrant: null,\\n        LightVibrant: null,\\n        Muted: null,\\n        DarkMuted: null,\\n        LightMuted: null\\n    };\\n    // mVibrantSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\\n    palette.Vibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\\n    // mLightVibrantSwatch = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\\n    palette.LightVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\\n    // mDarkVibrantSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\\n    //     TARGET_VIBRANT_SATURATION, MIN_VIBRANT_SATURATION, 1f)\\n    palette.DarkVibrant = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetVibrantSaturation, opts.minVibrantSaturation, 1, opts);\\n    // mMutedSwatch = findColor(TARGET_NORMAL_LUMA, MIN_NORMAL_LUMA, MAX_NORMAL_LUMA,\\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\\n    palette.Muted = _findColorVariation(palette, swatches, maxPopulation, opts.targetNormalLuma, opts.minNormalLuma, opts.maxNormalLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\\n    // mLightMutedColor = findColor(TARGET_LIGHT_LUMA, MIN_LIGHT_LUMA, 1f,\\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\\n    palette.LightMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetLightLuma, opts.minLightLuma, 1, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\\n    // mDarkMutedSwatch = findColor(TARGET_DARK_LUMA, 0f, MAX_DARK_LUMA,\\n    //     TARGET_MUTED_SATURATION, 0f, MAX_MUTED_SATURATION)\\n    palette.DarkMuted = _findColorVariation(palette, swatches, maxPopulation, opts.targetDarkLuma, 0, opts.maxDarkLuma, opts.targetMutesSaturation, 0, opts.maxMutesSaturation, opts);\\n    return palette;\\n}\\nfunction _generateEmptySwatches(palette, maxPopulation, opts) {\\n    if (!palette.Vibrant && !palette.DarkVibrant && !palette.LightVibrant) {\\n        if (!palette.DarkVibrant && palette.DarkMuted) {\\n            var _a = palette.DarkMuted.hsl, h = _a[0], s = _a[1], l = _a[2];\\n            l = opts.targetDarkLuma;\\n            palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n        }\\n        if (!palette.LightVibrant && palette.LightMuted) {\\n            var _b = palette.LightMuted.hsl, h = _b[0], s = _b[1], l = _b[2];\\n            l = opts.targetDarkLuma;\\n            palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n        }\\n    }\\n    if (!palette.Vibrant && palette.DarkVibrant) {\\n        var _c = palette.DarkVibrant.hsl, h = _c[0], s = _c[1], l = _c[2];\\n        l = opts.targetNormalLuma;\\n        palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n    else if (!palette.Vibrant && palette.LightVibrant) {\\n        var _d = palette.LightVibrant.hsl, h = _d[0], s = _d[1], l = _d[2];\\n        l = opts.targetNormalLuma;\\n        palette.Vibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n    if (!palette.DarkVibrant && palette.Vibrant) {\\n        var _e = palette.Vibrant.hsl, h = _e[0], s = _e[1], l = _e[2];\\n        l = opts.targetDarkLuma;\\n        palette.DarkVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n    if (!palette.LightVibrant && palette.Vibrant) {\\n        var _f = palette.Vibrant.hsl, h = _f[0], s = _f[1], l = _f[2];\\n        l = opts.targetLightLuma;\\n        palette.LightVibrant = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n    if (!palette.Muted && palette.Vibrant) {\\n        var _g = palette.Vibrant.hsl, h = _g[0], s = _g[1], l = _g[2];\\n        l = opts.targetMutesSaturation;\\n        palette.Muted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n    if (!palette.DarkMuted && palette.DarkVibrant) {\\n        var _h = palette.DarkVibrant.hsl, h = _h[0], s = _h[1], l = _h[2];\\n        l = opts.targetMutesSaturation;\\n        palette.DarkMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n    if (!palette.LightMuted && palette.LightVibrant) {\\n        var _j = palette.LightVibrant.hsl, h = _j[0], s = _j[1], l = _j[2];\\n        l = opts.targetMutesSaturation;\\n        palette.LightMuted = new color_1.Swatch(converter_1.hslToRgb(h, s, l), 0);\\n    }\\n}\\nvar DefaultGenerator = function (swatches, opts) {\\n    opts = Object.assign({}, DefaultOpts, opts);\\n    var maxPopulation = _findMaxPopulation(swatches);\\n    var palette = _generateVariationColors(swatches, maxPopulation, opts);\\n    _generateEmptySwatches(palette, maxPopulation, opts);\\n    return palette;\\n};\\nexports.default = DefaultGenerator;\\n\\n\\n/***/ }),\\n/* 11 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\\n    return new (P || (P = Promise))(function (resolve, reject) {\\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\\n        function rejected(value) { try { step(generator[\\\"throw\\\"](value)); } catch (e) { reject(e); } }\\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\\n    });\\n};\\nvar __generator = (this && this.__generator) || function (thisArg, body) {\\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\\n    return g = { next: verb(0), \\\"throw\\\": verb(1), \\\"return\\\": verb(2) }, typeof Symbol === \\\"function\\\" && (g[Symbol.iterator] = function() { return this; }), g;\\n    function verb(n) { return function (v) { return step([n, v]); }; }\\n    function step(op) {\\n        if (f) throw new TypeError(\\\"Generator is already executing.\\\");\\n        while (_) try {\\n            if (f = 1, y && (t = op[0] & 2 ? y[\\\"return\\\"] : op[0] ? y[\\\"throw\\\"] || ((t = y[\\\"return\\\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\\n            if (y = 0, t) op = [op[0] & 2, t.value];\\n            switch (op[0]) {\\n                case 0: case 1: t = op; break;\\n                case 4: _.label++; return { value: op[1], done: false };\\n                case 5: _.label++; y = op[1]; op = [0]; continue;\\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\\n                default:\\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\\n                    if (t[2]) _.ops.pop();\\n                    _.trys.pop(); continue;\\n            }\\n            op = body.call(thisArg, _);\\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\\n    }\\n};\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.BasicPipeline = exports.Stage = void 0;\\nvar image_1 = __webpack_require__(12);\\nvar Stage = /** @class */ (function () {\\n    function Stage(pipeline) {\\n        this.pipeline = pipeline;\\n        this._map = {};\\n    }\\n    Stage.prototype.names = function () {\\n        return Object.keys(this._map);\\n    };\\n    Stage.prototype.has = function (name) {\\n        return !!this._map[name];\\n    };\\n    Stage.prototype.get = function (name) {\\n        return this._map[name];\\n    };\\n    Stage.prototype.register = function (name, stageFn) {\\n        this._map[name] = stageFn;\\n        return this.pipeline;\\n    };\\n    return Stage;\\n}());\\nexports.Stage = Stage;\\nvar BasicPipeline = /** @class */ (function () {\\n    function BasicPipeline() {\\n        this.filter = new Stage(this);\\n        this.quantizer = new Stage(this);\\n        this.generator = new Stage(this);\\n    }\\n    BasicPipeline.prototype._buildProcessTasks = function (_a) {\\n        var _this = this;\\n        var filters = _a.filters, quantizer = _a.quantizer, generators = _a.generators;\\n        // Support wildcard for generators\\n        if (generators.length === 1 && generators[0] === '*') {\\n            generators = this.generator.names();\\n        }\\n        return {\\n            filters: filters.map(function (f) { return createTask(_this.filter, f); }),\\n            quantizer: createTask(this.quantizer, quantizer),\\n            generators: generators.map(function (g) { return createTask(_this.generator, g); })\\n        };\\n        function createTask(stage, o) {\\n            var name;\\n            var options;\\n            if (typeof o === 'string') {\\n                name = o;\\n            }\\n            else {\\n                name = o.name;\\n                options = o.options;\\n            }\\n            return {\\n                name: name,\\n                fn: stage.get(name),\\n                options: options\\n            };\\n        }\\n    };\\n    BasicPipeline.prototype.process = function (imageData, opts) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var _a, filters, quantizer, generators, imageFilterData, colors, palettes;\\n            return __generator(this, function (_b) {\\n                switch (_b.label) {\\n                    case 0:\\n                        _a = this._buildProcessTasks(opts), filters = _a.filters, quantizer = _a.quantizer, generators = _a.generators;\\n                        return [4 /*yield*/, this._filterColors(filters, imageData)];\\n                    case 1:\\n                        imageFilterData = _b.sent();\\n                        return [4 /*yield*/, this._generateColors(quantizer, imageFilterData)];\\n                    case 2:\\n                        colors = _b.sent();\\n                        return [4 /*yield*/, this._generatePalettes(generators, colors)];\\n                    case 3:\\n                        palettes = _b.sent();\\n                        return [2 /*return*/, {\\n                                colors: colors,\\n                                palettes: palettes\\n                            }];\\n                }\\n            });\\n        });\\n    };\\n    BasicPipeline.prototype._filterColors = function (filters, imageData) {\\n        return Promise.resolve(image_1.applyFilters(imageData, filters.map(function (_a) {\\n            var fn = _a.fn;\\n            return fn;\\n        })));\\n    };\\n    BasicPipeline.prototype._generateColors = function (quantizer, imageData) {\\n        return Promise.resolve(quantizer.fn(imageData.data, quantizer.options));\\n    };\\n    BasicPipeline.prototype._generatePalettes = function (generators, colors) {\\n        return __awaiter(this, void 0, void 0, function () {\\n            var promiseArr;\\n            return __generator(this, function (_a) {\\n                switch (_a.label) {\\n                    case 0: return [4 /*yield*/, Promise.all(generators.map(function (_a) {\\n                            var fn = _a.fn, options = _a.options;\\n                            return Promise.resolve(fn(colors, options));\\n                        }))\\n                        // Map the values to the expected name\\n                    ];\\n                    case 1:\\n                        promiseArr = _a.sent();\\n                        // Map the values to the expected name\\n                        return [2 /*return*/, Promise.resolve(promiseArr.reduce(function (promises, promiseVal, i) {\\n                                promises[generators[i].name] = promiseVal;\\n                                return promises;\\n                            }, {}))];\\n                }\\n            });\\n        });\\n    };\\n    return BasicPipeline;\\n}());\\nexports.BasicPipeline = BasicPipeline;\\n\\n\\n/***/ }),\\n/* 12 */\\n/***/ (function(module, exports, __webpack_require__) {\\n\\n\\\"use strict\\\";\\n\\nObject.defineProperty(exports, \\\"__esModule\\\", { value: true });\\nexports.applyFilters = exports.ImageBase = void 0;\\nvar ImageBase = /** @class */ (function () {\\n    function ImageBase() {\\n    }\\n    ImageBase.prototype.scaleDown = function (opts) {\\n        var width = this.getWidth();\\n        var height = this.getHeight();\\n        var ratio = 1;\\n        if (opts.maxDimension > 0) {\\n            var maxSide = Math.max(width, height);\\n            if (maxSide > opts.maxDimension)\\n                ratio = opts.maxDimension / maxSide;\\n        }\\n        else {\\n            ratio = 1 / opts.quality;\\n        }\\n        if (ratio < 1)\\n            this.resize(width * ratio, height * ratio, ratio);\\n    };\\n    return ImageBase;\\n}());\\nexports.ImageBase = ImageBase;\\nfunction applyFilters(imageData, filters) {\\n    if (filters.length > 0) {\\n        var pixels = imageData.data;\\n        var n = pixels.length / 4;\\n        var offset = void 0;\\n        var r = void 0;\\n        var g = void 0;\\n        var b = void 0;\\n        var a = void 0;\\n        for (var i = 0; i < n; i++) {\\n            offset = i * 4;\\n            r = pixels[offset + 0];\\n            g = pixels[offset + 1];\\n            b = pixels[offset + 2];\\n            a = pixels[offset + 3];\\n            // Mark ignored color\\n            for (var j = 0; j < filters.length; j++) {\\n                if (!filters[j](r, g, b, a)) {\\n                    pixels[offset + 3] = 0;\\n                    break;\\n                }\\n            }\\n        }\\n    }\\n    return imageData;\\n}\\nexports.applyFilters = applyFilters;\\n\\n\\n/***/ })\\n/******/ ]);\\n//# sourceMappingURL=ce4e11e0869042e47f66.worker.js.map\", __webpack_public_path__ + \"ce4e11e0869042e47f66.worker.js\");\n};","'use strict';\n\n// http://stackoverflow.com/questions/10343913/how-to-create-a-web-worker-from-a-string\n\nvar URL = window.URL || window.webkitURL;\n\nmodule.exports = function (content, url) {\n  try {\n    try {\n      var blob;\n\n      try {\n        // BlobBuilder = Deprecated, but widely implemented\n        var BlobBuilder = window.BlobBuilder || window.WebKitBlobBuilder || window.MozBlobBuilder || window.MSBlobBuilder;\n\n        blob = new BlobBuilder();\n\n        blob.append(content);\n\n        blob = blob.getBlob();\n      } catch (e) {\n        // The proposed API\n        blob = new Blob([content]);\n      }\n\n      return new Worker(URL.createObjectURL(blob));\n    } catch (e) {\n      return new Worker('data:application/javascript,' + encodeURIComponent(content));\n    }\n  } catch (e) {\n    if (!url) {\n      throw Error('Inline worker is not supported');\n    }\n\n    return new Worker(url);\n  }\n};"],"sourceRoot":""}